<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IoLent Mining</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
    font-family:Poppins,sans-serif;
    background:#1B5E20;
    color:#fff;
    text-align:center;
    padding:15px
}
.card{
    max-width:420px;
    margin:12px auto;
    padding:18px;
    border-radius:18px;
    background:rgba(255,255,255,.08);
    backdrop-filter:blur(5px);
    box-shadow:0 5px 12px rgba(0,0,0,.4)
}
.big-balance{font-size:24px;font-weight:bold}
.sub{font-size:14px;opacity:.85}

.circle-box{width:250px;height:250px;margin:30px auto;position:relative}
.progress-ring{transform:rotate(-90deg)}
.progress-ring-circle{
    stroke:#00FF99;stroke-width:8;fill:transparent;
    stroke-linecap:round;transition:stroke-dashoffset 1s linear
}
.circle-inner{
    position:absolute;inset:0;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center
}
.mine-amount{font-size:26px;font-weight:bold}

.progress-box{max-width:420px;margin:10px auto;text-align:left}
.progress-text{font-size:12px;opacity:.8;margin-bottom:5px}
.progress-bar{
    height:12px;background:rgba(255,255,255,.2);
    border-radius:10px;overflow:hidden
}
.progress-fill{height:100%;width:0%;background:#FFD700;transition:.3s}

#claimBtn{
    max-width:420px;width:100%;padding:14px;
    font-size:17px;border:none;border-radius:12px;
    margin-top:12px;
    background:linear-gradient(to right,#ffcc00,#ff9900);
    color:#000;font-weight:bold;opacity:.4
}
#claimBtn.enabled{opacity:1;cursor:pointer}

/* ===== Ad Dialog ===== */
#adModal{
    position:fixed;inset:0;
    background:rgba(0,0,0,.7);
    display:none;justify-content:center;align-items:center;
    z-index:999
}
#adBox{
    width:90%;max-width:360px;
    background:#fff;color:#000;
    border-radius:16px;
    padding:14px;text-align:center
}
#adBox img{
    width:100%;border-radius:12px
}
#adEarn{
    margin:10px 0;font-weight:bold;color:#1B5E20
}
#adBtn{
    width:100%;padding:12px;
    border:none;border-radius:10px;
    background:#1B5E20;color:#fff;
    font-size:16px;font-weight:bold
}
</style>
</head>

<body>

<div class="card" style="display:flex">
    <div style="flex:1">
        <div class="big-balance" id="ipu">0</div>
        <div class="sub">MY POWER (IPU)</div>
    </div>
    <div style="flex:1">
        <div class="big-balance" id="incomeSec">0.00000000</div>
        <div class="sub">INCOME / SEC</div>
    </div>
</div>

<div class="circle-box" id="mineCircle">
    <svg class="progress-ring" width="250" height="250">
        <circle class="progress-ring-circle" r="115" cx="125" cy="125"/>
    </svg>
    <div class="circle-inner">
        <div style="font-size:28px">⚡</div>
        <div class="mine-amount" id="miningAmount">0.00000000</div>
    </div>
</div>

<div class="progress-box">
    <div class="progress-text">
        Progress to claim <span id="ptext" style="float:right">0%</span>
    </div>
    <div class="progress-bar">
        <div class="progress-fill" id="pbar"></div>
    </div>
</div>

<button id="claimBtn" disabled onclick="showAd()">⬇ COLLECT INCOME</button>

<!-- ===== Ad Dialog ===== -->
<div id="adModal">
    <div id="adBox">
        <a id="adLink" href="#" target="_blank">
            <img id="adImg" src="">
        </a>
        <div id="adEarn"></div>
        <button id="adBtn" onclick="closeAd()">CONTINUE</button>
    </div>
</div>

<script>
let IPU="0",
balance="0",
startFrom="0";
let rate=0.0001,
minClaim=0.005;
let secs=0,
totalTime=600,
miningActive=false;
let mineInterval=null,
timerInterval=null;

const ads=[
 "https://i.ibb.co.com/C3c28QjY/1763119409545.png",
 "https://i.ibb.co.com/C3c28QjY/1763119409545.png",
 "https://i.ibb.co.com/C3c28QjY/1763119409545.png",
 "https://i.ibb.co.com/C3c28QjY/1763119409545.png",
 "https://i.ibb.co.com/C3c28QjY/1763119409545.png"
];

const circle=document.querySelector(".progress-ring-circle");
const radius=circle.r.baseVal.value;
const circumference=2*Math.PI*radius;
circle.style.strokeDasharray=circumference;
circle.style.strokeDashoffset=circumference;

/* Android Loader */
function loadUserData(j){
 let d=JSON.parse(j);
 IPU=d.A15x||"0";balance=d.A20x||"0";startFrom=d.A75x||"0";
 ipu.innerHTML=IPU;
 incomeSec.innerHTML=(parseFloat(IPU)*rate).toFixed(8);
 miningAmount.innerHTML=parseFloat(balance).toFixed(8);
 updateClaimBar();
 if(parseInt(startFrom)>0)startMining();Android.sendValueAndCall("Ok");
}

function startMining(){
 if(miningActive)return;
 miningActive=true;stopMining();
 secs=parseInt(startFrom)||0;
 mineInterval=setInterval(()=>{
  balance=(parseFloat(balance)+(parseFloat(IPU)*rate)).toString();
miningAmount.innerHTML=parseFloat(balance).toFixed(8);
  updateClaimBar();
 },1000);
 timerInterval=setInterval(()=>{
  secs++;circle.style.strokeDashoffset=
   circumference-(secs/totalTime*circumference);
  if(secs>=totalTime){stopMining();miningActive=false;}
 },1000);
}
function stopMining(){clearInterval(mineInterval);clearInterval(timerInterval);}
mineCircle.onclick=()=>{if(!miningActive)startMining();}

function updateClaimBar(){
 let p=Math.min((parseFloat(balance)/minClaim)*100,100);
 pbar.style.width=p+"%";ptext.innerHTML=p.toFixed(0)+"%";
 claimBtn.disabled=parseFloat(balance)<minClaim;
 claimBtn.classList.toggle("enabled",parseFloat(balance)>=minClaim);
}

/* ===== Ad Logic ===== */
function showAd(){
 let earned=parseFloat(balance).toFixed(8);
 let ad=ads[Math.floor(Math.random()*ads.length)];
 adImg.src=ad;adLink.href=ad;
 adEarn.innerHTML="You earned "+earned+" TK from this collect";
 adModal.style.display="flex";
}

function closeAd(){
 adModal.style.display="none";
Android.sendValueAndCall("collect" + balance);
 balance="0";startFrom="0";
 miningAmount.innerHTML="0.00000000";
 updateClaimBar();
}
</script>

</body>
</html>